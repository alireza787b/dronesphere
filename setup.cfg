[flake8]
max-line-length = 100
extend-ignore =
    # Whitespace and line break
    E203,
    W503,
    # Docstring checks (we'll add proper docs later)
    D100, D101, D102, D103, D104, D105, D106, D107,
    D200, D205, D400, D401,
    # Import not used in __init__.py files
    F401,
exclude =
    .git,
    __pycache__,
    .venv,
    venv,
    build,
    dist,
    *.egg-info,
    .pytest_cache,
    .mypy_cache
per-file-ignores =
    # Allow unused imports in __init__ files
    __init__.py:F401
    # Ignore all docstring requirements in tests
    tests/*:D
    # Allow redefinition in test files
    test_*.py:F811

[mypy]
python_version = 3.10
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
ignore_missing_imports = True
exclude = venv|.venv|build|dist

[isort]
profile = black
multi_line_output = 3
include_trailing_comma = True
force_grid_wrap = 0
use_parentheses = True
ensure_newline_before_comments = True
line_length = 100

[black]
line-length = 100
target-version = ['py310']
include = '\.pyi?$'
exclude = '''
/(
    \.git
  | \.venv
  | venv
  | build
  | dist
)/
'''

[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    -ra
    --strict-markers
    --cov=src
    --cov-branch
    --cov-report=term-missing:skip-covered
    --cov-report=html
    --cov-report=xml
    --cov-fail-under=80
    -vv
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests

[coverage:run]
source = src
omit =
    */tests/*
    */venv/*
    */.venv/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = True

[tool:pytest]
asyncio_mode = auto
